{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = syntheticClick;\n\nvar _notifier = require('./notifier');\n\nvar _constants = require('./constants');\n\nvar blockClick = false;\nvar blockClickTimerID = null;\nvar blockClickCounter = 0; // call node.click() on tap, and block a subsequent click fired by the browser if there is one,\n// note that blocking the subsequent click event fired by the browser is required because\n// when the tap/node.click() call results in a change to the layout of the DOM,\n// e.g. hide something, the subsequent click event fired by the browser will land\n// on the DOM in it's new layout, and if where the tap occurred now has something different\n// that has a click handler, e.g. a link, then the subsequent click event will land on\n// and trigger the click handler, which is very bad, so it needs to be blocked.\n\nfunction syntheticClick(node) {\n  // only block one subsequent click event per node.click() call\n  blockClickCounter++;\n  if (blockClickTimerID !== null) window.clearTimeout(blockClickTimerID);\n  blockClick = false;\n  node.click();\n  blockClick = true; // reset click blocking if subsequent click isn't added to browser's queue w/in queueTime\n\n  blockClickTimerID = window.setTimeout(function () {\n    blockClick = false;\n    blockClickCounter = 0;\n    blockClickTimerID = null;\n  }, _constants.queueTime);\n}\n\nfunction handleClick(e) {\n  if (!blockClick) return;\n  e.stopPropagation();\n  e.preventDefault();\n  blockClickCounter--; // reset click blocking if the number of clicks to block is met\n\n  if (blockClickCounter === 0) {\n    blockClick = false;\n\n    if (blockClickTimerID !== null) {\n      window.clearTimeout(blockClickTimerID);\n      blockClickTimerID = null;\n    }\n  }\n} // only required for touch devices because called on touchend tap to control tapClick\n\n\nif (_constants.deviceHasTouch) (0, _notifier.notifyOfAll)(['click'], handleClick);\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}